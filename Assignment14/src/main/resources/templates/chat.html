<html xmlns:th="http://thymeleaf.org">
	<head>
		<title>Join Channel</title>
	</head>
	
	<body>
		<h2>General Chat</h2>
		
		<div th:if="${#lists.size(L_msg) >= 1}" th:each="messages : ${L_msg}">
				[[${messages.user.name}]]: [[${messages.message}]]
		</div>
		
		
		<div>
			<!-- <input type="hidden" th:field="${user}" />-->
			<input type="text" id="message"/>
			<input type="button" value="Enter message" onclick="myFunction()" id="button"/>
		</div>
			
		
		
	<script type="text/javascript">		
		function myFunction() {
			var msg = document.getElementById('message').value
			
			var obj ={
					"user": {"id" : 0, "name" : "anon"},
					"message" : msg
			}
			
			fetch(window.location.href, {
				method: "POST",
				headers: {
					"Content-type": "application/json"
				},
				body: JSON.stringify(obj)
			})
			console.log('This is my link: '+ window.location.href)
		 setInterval(fetchFunc, 5000);
		}

		function fetchFunc() {
		 fetch(window.location.href).then((response) => console.log(response))
		}
		
			
	</script>	
		
		
	</body>
</html>